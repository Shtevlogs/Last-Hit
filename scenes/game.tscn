[gd_scene load_steps=19 format=3 uid="uid://bkgnymwh1s6iy"]

[ext_resource type="Script" uid="uid://cjnck3w5qj1d3" path="res://scripts/scenes/game.gd" id="1_yqjtg"]
[ext_resource type="PackedScene" uid="uid://bid2rj5nw7s5n" path="res://prefabs/minion_spawn_indicator.tscn" id="2_iywne"]
[ext_resource type="Script" uid="uid://dhc4xdcojksbi" path="res://scripts/managers/level_manager.gd" id="2_yqjtg"]
[ext_resource type="Script" uid="uid://bt1isueemlaxy" path="res://scripts/managers/minion_placement_manager.gd" id="3_lbhrr"]
[ext_resource type="Theme" uid="uid://bpgkq5gwgyst4" path="res://assets/theme.tres" id="3_lnu2h"]
[ext_resource type="Script" uid="uid://h1ufp1ln44gf" path="res://scripts/behaviours/mouse_click_indicator.gd" id="5_p57ef"]
[ext_resource type="Script" uid="uid://clin1itgg8eht" path="res://scripts/managers/vfx_manager.gd" id="6_0tnpc"]
[ext_resource type="Script" uid="uid://bvrgg5lfejikw" path="res://scripts/managers/timer_manager.gd" id="7_0tnpc"]
[ext_resource type="Script" uid="uid://bykwdvslg7uy2" path="res://scripts/behaviours/enemy_health_bar.gd" id="7_ssvqc"]
[ext_resource type="Script" uid="uid://rg8wtenp6jxd" path="res://scripts/behaviours/ui/mana.gd" id="7_u5sy4"]
[ext_resource type="Script" uid="uid://wx7thb3mtcgd" path="res://scripts/managers/ransack_manager.gd" id="8_ir15t"]
[ext_resource type="Script" uid="uid://mpjvc8sm8t5t" path="res://scripts/managers/level_end_manager.gd" id="9_ca42v"]
[ext_resource type="Script" uid="uid://0jw7xyikcogh" path="res://scripts/behaviours/ui/spawn_button.gd" id="9_vtaks"]
[ext_resource type="Script" uid="uid://dgplqvgrc0uli" path="res://scripts/behaviours/minion_class/warrior_minion.gd" id="10_kvpfn"]
[ext_resource type="Script" uid="uid://dvj1hwnolokdj" path="res://scripts/behaviours/minion_class/caster_minion.gd" id="11_dinhu"]
[ext_resource type="Script" uid="uid://667ff05fjvtm" path="res://scripts/behaviours/minion_class/tank_minion.gd" id="12_kvuet"]
[ext_resource type="Script" uid="uid://sl2psjwyqsu1" path="res://scripts/behaviours/ui/player_hp.gd" id="14_trtic"]
[ext_resource type="Script" uid="uid://70txus5lxe8q" path="res://scripts/behaviours/ui/rewards_control.gd" id="17_rysoc"]

[node name="Game" type="Node2D"]
script = ExtResource("1_yqjtg")

[node name="LevelRoot" type="Node2D" parent="."]

[node name="Camera2D" type="Camera2D" parent="."]

[node name="LevelManager" type="Node" parent="."]
script = ExtResource("2_yqjtg")

[node name="MinionPlacementManager" type="Node2D" parent="."]
script = ExtResource("3_lbhrr")

[node name="MinionSpawnIndicator" parent="." instance=ExtResource("2_iywne")]
visible = false

[node name="MouseClickIndicator" type="Node2D" parent="."]
visible = false
script = ExtResource("5_p57ef")

[node name="Line2D" type="Line2D" parent="MouseClickIndicator"]
points = PackedVector2Array(0, 5, 3.5, 3.5, 5, 0, 3.5, -3.5, 0, -5, -3.5, -3.5, -5, 0, -3.5, 3.5, 0, 5)
width = 2.0
default_color = Color(0.6431373, 0.5529412, 0.7137255, 1)

[node name="VfxManager" type="Node2D" parent="."]
script = ExtResource("6_0tnpc")

[node name="EnemyHealthBar" type="Polygon2D" parent="."]
color = Color(0.6509804, 0.39215687, 0.4392157, 1)
script = ExtResource("7_ssvqc")

[node name="TimerManager" type="Node" parent="."]
script = ExtResource("7_0tnpc")

[node name="RansackManager" type="Node" parent="."]
script = ExtResource("8_ir15t")

[node name="Timer" type="Timer" parent="RansackManager"]
wait_time = 6.0
autostart = true

[node name="LevelEndManager" type="Node" parent="."]
script = ExtResource("9_ca42v")

[node name="Timer" type="Timer" parent="LevelEndManager"]
one_shot = true

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="UI" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme = ExtResource("3_lnu2h")

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer/UI"]
layout_mode = 1
anchors_preset = 11
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 0
grow_vertical = 2
mouse_filter = 2
alignment = 1

[node name="SpawnWarrior" type="Button" parent="CanvasLayer/UI/VBoxContainer"]
layout_mode = 2
mouse_default_cursor_shape = 2
theme_override_colors/font_hover_color = Color(0.78431374, 0.7490196, 0.7490196, 1)
text = "(Q) Warrior 30g
-Ready-"
flat = true
script = ExtResource("9_vtaks")
minion_class = ExtResource("10_kvpfn")

[node name="SpawnCaster" type="Button" parent="CanvasLayer/UI/VBoxContainer"]
layout_mode = 2
mouse_default_cursor_shape = 2
theme_override_colors/font_hover_color = Color(0.78431374, 0.7490196, 0.7490196, 1)
text = "(W) Caster 20g
-Ready-"
flat = true
script = ExtResource("9_vtaks")
minion_class = ExtResource("11_dinhu")

[node name="SpawnTank" type="Button" parent="CanvasLayer/UI/VBoxContainer"]
layout_mode = 2
mouse_default_cursor_shape = 2
theme_override_colors/font_hover_color = Color(0.78431374, 0.7490196, 0.7490196, 1)
text = "(E) Tank 75g
-Ready-"
flat = true
script = ExtResource("9_vtaks")
minion_class = ExtResource("12_kvuet")

[node name="Spacer" type="Control" parent="CanvasLayer/UI/VBoxContainer"]
custom_minimum_size = Vector2(20, 100)
layout_mode = 2

[node name="Mana" type="Label" parent="CanvasLayer/UI/VBoxContainer"]
layout_mode = 2
theme_override_colors/font_color = Color(0.6431373, 0.5529412, 0.7137255, 1)
text = "0g"
horizontal_alignment = 1
script = ExtResource("7_u5sy4")

[node name="PlayerHP" type="Control" parent="CanvasLayer/UI/VBoxContainer"]
custom_minimum_size = Vector2(0, 20)
layout_mode = 2
script = ExtResource("14_trtic")

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/UI/VBoxContainer/PlayerHP"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
alignment = 1

[node name="Heart" type="Control" parent="CanvasLayer/UI/VBoxContainer/PlayerHP/HBoxContainer"]
custom_minimum_size = Vector2(20, 20)
layout_mode = 2

[node name="Polygon2D" type="Polygon2D" parent="CanvasLayer/UI/VBoxContainer/PlayerHP/HBoxContainer/Heart"]
position = Vector2(10, 7)
color = Color(0.6509804, 0.39215687, 0.4392157, 1)
polygon = PackedVector2Array(0, 0, 4, -4, 8, 0, 0, 10, -8, 0, -4, -4)

[node name="Heart2" type="Control" parent="CanvasLayer/UI/VBoxContainer/PlayerHP/HBoxContainer"]
custom_minimum_size = Vector2(20, 20)
layout_mode = 2

[node name="Polygon2D" type="Polygon2D" parent="CanvasLayer/UI/VBoxContainer/PlayerHP/HBoxContainer/Heart2"]
position = Vector2(10, 7)
color = Color(0.6509804, 0.39215687, 0.4392157, 1)
polygon = PackedVector2Array(0, 0, 4, -4, 8, 0, 0, 10, -8, 0, -4, -4)

[node name="Heart3" type="Control" parent="CanvasLayer/UI/VBoxContainer/PlayerHP/HBoxContainer"]
custom_minimum_size = Vector2(20, 20)
layout_mode = 2

[node name="Polygon2D" type="Polygon2D" parent="CanvasLayer/UI/VBoxContainer/PlayerHP/HBoxContainer/Heart3"]
position = Vector2(10, 7)
color = Color(0.6509804, 0.39215687, 0.4392157, 1)
polygon = PackedVector2Array(0, 0, 4, -4, 8, 0, 0, 10, -8, 0, -4, -4)

[node name="RewardsControl" type="Control" parent="CanvasLayer/UI"]
unique_name_in_owner = true
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("17_rysoc")

[node name="Label" type="Label" parent="CanvasLayer/UI/RewardsControl"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -4.0
offset_right = 20.0
offset_bottom = 4.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 16
text = "+50g"
horizontal_alignment = 1
vertical_alignment = 1

[connection signal="timeout" from="RansackManager/Timer" to="RansackManager" method="_on_timer_timeout"]
[connection signal="timeout" from="LevelEndManager/Timer" to="LevelEndManager" method="_on_timer_timeout"]
